<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>爬！ | CecileGo!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="大概是本站建站以来最干货的一篇？然而还是因为代理的问题以失败告终，这该死的墙啊啊啊本来想做个词云玩玩，现在也只有想想了TAT哇的一声哭出来墙内的网站问题应该是不大了。。并且我发现自己真的是一条没有耐心写过程博的暴躁生物233333大概本系列的下期会出text mining 相关了~全过程代码： #crawler test #https:&#x2F;&#x2F;pxncong.rocks&#x2F; url设置 urllist&#x3D;">
<meta property="og:type" content="article">
<meta property="og:title" content="爬！">
<meta property="og:url" content="https://spirit.cecilego.monster/fortheme/2020/06/26/%E7%88%AC%EF%BC%81/index.html">
<meta property="og:site_name" content="CecileGo!">
<meta property="og:description" content="大概是本站建站以来最干货的一篇？然而还是因为代理的问题以失败告终，这该死的墙啊啊啊本来想做个词云玩玩，现在也只有想想了TAT哇的一声哭出来墙内的网站问题应该是不大了。。并且我发现自己真的是一条没有耐心写过程博的暴躁生物233333大概本系列的下期会出text mining 相关了~全过程代码： #crawler test #https:&#x2F;&#x2F;pxncong.rocks&#x2F; url设置 urllist&#x3D;">
<meta property="article:published_time" content="2020-06-26T07:37:00.000Z">
<meta property="article:modified_time" content="2020-06-26T07:42:12.126Z">
<meta property="article:author" content="Cecile Z.">
<meta property="article:tag" content="R">
<meta property="article:tag" content="Web Crawlers">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/fortheme/atom.xml" title="CecileGo!" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/fortheme/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container" style="height: 300px;">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/fortheme/" id="logo">CecileGo!</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/fortheme/" id="subtitle">cecile的小世界</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/fortheme/">Home</a>
        
          <a class="main-nav-link" href="/fortheme/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/fortheme/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://spirit.cecilego.monster/fortheme"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-爬！" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/fortheme/2020/06/26/%E7%88%AC%EF%BC%81/" class="article-date">
  <time datetime="2020-06-26T07:37:00.000Z" itemprop="datePublished">2020-06-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/fortheme/categories/Exploration/">Exploration</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      爬！
    </h1>
  

      </header>
    
    
      <div style="margin-top:10px;">
    <span class="post-time">
      <span class="post-meta-item-icon">
        <i class="fa fa-keyboard-o"></i>
        <span class="post-meta-item-text"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;字数: </span>
        <span class="post-count">958</span>
      </span>
    </span>
    <span class="post-time">
      &nbsp; | &nbsp;
      <span class="post-meta-item-icon">
        <i class="fa fa-hourglass-half"></i>
        <span class="post-meta-item-text">  预计阅读时长: </span>
        <span class="post-count">5mins</span>
        
      </span>
    </span>
</div>
  
        </header>
    <div class="article-entry" itemprop="articleBody">
      
    
        <p>大概是本站建站以来最干货的一篇？<br>然而还是因为代理的问题以失败告终，这该死的墙啊啊啊<br>本来想做个词云玩玩，现在也只有想想了TAT哇的一声哭出来<br>墙内的网站问题应该是不大了。。<br>并且我发现自己真的是一条没有耐心写过程博的暴躁生物233333<br>大概本系列的下期会出text mining 相关了~<br>全过程代码：</p>
<pre><code>#crawler test
#https://pxncong.rocks/
url设置
urllist=0
page=1:5x
urllist[page]=paste(&quot;https://pxncong.rocks/page-&quot;,page,sep=&apos;&apos;)
#伪装代理地址
UserAgent=c(
&quot;Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&quot;,
&quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko)   Chrome/31.0.1650.16 Safari/537.36&quot;,
&quot;Mozilla/5.0 (Windows NT 6.1; Intel Mac OS X 10.6; rv:7.0.1) Gecko/20100101 Firefox/7.0.1&quot;,
&quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36 OPR/18.0.1284.68&quot;,
&quot;Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0)&quot;,
&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)&quot;,
&quot;Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)&quot;,
&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36&quot;,
&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&quot;,
&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:7.0.1) Gecko/20100101 Firefox/7.0.1&quot;,
&quot;Opera/9.80 (Macintosh; Intel Mac OS X 10.9.1) Presto/2.12.388 Version/12.16&quot;,
&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36 OPR/18.0.1284.68&quot;,
&quot;Mozilla/5.0 (iPad; CPU OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) CriOS/30.0.1599.12 Mobile/11A465 Safari/8536.25&quot;,
&quot;Mozilla/5.0 (iPad; CPU OS 8_0 like Mac OS X) AppleWebKit/600.1.3 (KHTML, like Gecko) Version/8.0 Mobile/12A4345d Safari/600.1.4&quot;,
&quot;Mozilla/5.0 (iPad; CPU OS 7_0_2 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A501 Safari/9537.53&quot;,
&quot;Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&quot;,    
&quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&quot;,
&quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0&quot;)
n=length(UserAgent)
myheader&lt;-c(
&quot;User-Agent&quot;=UserAgent[sample(n-1,1)],#随机选择
&quot;Accept-Language&quot;=&quot;en-us&quot;,
&quot;Connection&quot;=&quot;keep-alive&quot;,
&quot;Accept-Charset&quot;=&quot;GB2312,utf-8;q=0.7,*;q=0.7&quot;)
#设置代理
Sys.setenv(&quot;http_proxy&quot;=&quot;http://保密保密&quot;)  
Sys.unsetenv(&quot;http_proxy&quot;)#取消代理
#网页爬取
for(url in urllist){
temp&lt;-getURL(url,encoding=&quot;utf-8&quot;,httpheader=myheader)
news=temp%&gt;%html_nodes(&apos;h4 a&apos;)
title=news%&gt;%html_text()
clicks=temp%&gt;%html_nodes(&apos;span.aw-small-text&apos;)
click=clicks%&gt;%html_text()
link=news%&gt;%html_attrs()
link1=c(1:length(link))
for (i in 1:length(link)) {
link1[i]=link[[i]][3]
}
link2=paste(&quot;https://pxncong.rocks&quot;,link1,sep=&quot;&quot;)
news_content=c(1:length(link2))
for(i in 1:length(link2)){
news_content[i]=read_html(link2[i])%&gt;%html_nodes(&apos;div.markitup-box&apos;)%&gt;%html_text()
}
news_count=c(1:length(link2))
for(i in 1:length(link2)){
news_count[i]=read_html(link1[i])%&gt;%html_nodes(&apos;b.count&apos;)%&gt;%html_text()
}
record[page]=data.frame(title,click,news_content,news_count)
Sys.sleep(5)
}
#不隐藏header
for(url in urllist){
temp&lt;-read_html(url)
news=temp%&gt;%html_nodes(&apos;h4 a&apos;)
title=news%&gt;%html_text()#获取标题
clicks=temp%&gt;%html_nodes(&apos;span.aw-small-text&apos;)
click=clicks%&gt;%html_text()#获取点击量、发帖时间
link=news%&gt;%html_attrs()
link1=c(1:length(link))
for (i in 1:length(link)) {
link1[i]=link[[i]][3]
}
link2=paste(&quot;https://pxncong.rocks&quot;,link1,sep=&quot;&quot;)
news_content=c(1:length(link2))
for(i in 1:length(link2)){
news_content[i]=read_html(link2[i])%&gt;%html_nodes(&apos;div.markitup-box&apos;)%&gt;%html_text()
}#获取回帖内容
news_count=c(1:length(link2))
for(i in 1:length(link2)){
news_count[i]=read_html(link2[i])%&gt;%html_nodes(&apos;b.count&apos;)%&gt;%html_text()
}#获取点赞数
record[page]=data.frame(title,click,news_content,news_count)#记录成数据框
Sys.sleep(5)}
#单页尝试
temp&lt;-read_html(&quot;https://www.google.com&quot;)
temp#失败TAT</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://spirit.cecilego.monster/fortheme/2020/06/26/%E7%88%AC%EF%BC%81/" data-id="ckbw25an300169gszh45r0qxr" class="article-share-link">Share</a>
      
        <a href="https://spirit.cecilego.monster/fortheme/2020/06/26/%E7%88%AC%EF%BC%81/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/fortheme/tags/R/" rel="tag">R</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/fortheme/tags/Web-Crawlers/" rel="tag">Web Crawlers</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/fortheme/2020/06/20/he-Evolution-of-Economic-Thought%EF%BC%886-5%EF%BC%89/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">The Evolution of Economic Thought（6.5）</div>
    </a>
  
</nav>

  
</article>

<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
  </div>
</section>


  <section id="comments" class="vcomment">
  </section>
</section>
        
          <aside id="sidebar">
  <style>
  div.styleone{
    position:relative;
    top:25px;
    right:8px
  }
  </style>
  <div class=styleone>
    <div id="music163player" >
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=300 height=110 src="//music.163.com/outchain/player?type=0&id=5047012273&auto=0&height=90">
      </iframe>
    </div>
  </div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/fortheme/categories/Amusement/">Amusement</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/fortheme/categories/Exploration/">Exploration</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/fortheme/categories/Introduction/">Introduction</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/fortheme/tags/Brain-Monster/" rel="tag">Brain Monster</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/fortheme/tags/Introduction/" rel="tag">Introduction</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/fortheme/tags/LYRICS/" rel="tag">LYRICS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/fortheme/tags/R/" rel="tag">R</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/fortheme/tags/The-Evolution-of-Economic-Thought/" rel="tag">The Evolution of Economic Thought</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/fortheme/tags/Web-Crawlers/" rel="tag">Web Crawlers</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/fortheme/tags/What-are-the-worlds/" rel="tag">What are the worlds </a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/fortheme/archives/2020/06/">June 2020</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/fortheme/archives/2020/05/">May 2020</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    
    <div class="widget-wrap">
      <h3 class="widget-title">MAZE</h3>
      <div class="widget">
        <a href="/fortheme/maze/index-1.html">MAZE?</a> <br>
        <a href="/fortheme/maze/index.html">Brain Monster</a><br> 
        <a href="/fortheme/maze/index-2.html">Memento</a><br>
      </div>
    </div>
  
  
</aside>
        
      </div>
      <footer id="footer">
  
  <center>
  <div>
    <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
    <script>
        var now = new Date();
        function createtime() {
            var grt= new Date("05/31/2020 20:00:00");
            now.setTime(now.getTime()+250);
            days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
            hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
            if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
            mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
            seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
            snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
            document.getElementById("timeDate").innerHTML = "本站已滑稽运行 "+dnum+" 天 ";
            document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
        }
    setInterval("createtime()",250);
    </script>
    </div>
  </center>
 <center>
   <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Cecile Z.<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</center> 
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/fortheme/" class="mobile-nav-link">Home</a>
  
    <a href="/fortheme/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'cecilego';
  
  var disqus_url = 'https://spirit.cecilego.monster/fortheme/2020/06/26/%E7%88%AC%EF%BC%81/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fortheme/fancybox/jquery.fancybox.css">

  
<script src="/fortheme/fancybox/jquery.fancybox.pack.js"></script>




<script src="/fortheme/js/script.js"></script>




  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  <script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = 'nick'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = 'false' == true;
    var verify = 'false' == true;
    new Valine({
      el: '.vcomment',
      notify: notify,
      verify: verify,
      appId: "qyVhC9FNRmF2ql1sOy9wTTqr-gzGzoHsz",
      appKey: "NmdPQ06YtDBBruWAf6ptaTu6",
      placeholder: "Own Little World~",
      pageSize: '10',
      avatar: 'mm',
      lang: 'zh-cn',
      visitor: 'true'
    });
  </script>

  </div>
  <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
  </script>
<script src="/fortheme/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/fortheme/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>